(function(){var a,b,c,d,e,f,g,h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},j=function(a,b){return function(){return a.apply(b,arguments)}};f=function(){function a(){}return a}(),a=function(){function a(a,b){this._cache={lower:-1},this._getkey=j(function(a,b){var c,d,e;for(d=0,e=a.length;d<e;d++){c=a[d];if(c.name===b)return c.value}return null},this),this.load=j(function(a,b,c,d,e,f){var g,h,i,k,l,m;return m={},g=!1,l=this._getkey(e,"iDisplayStart"),k=this._getkey(e,"iDisplayLength"),i=l+k,m.query={},m.query.limit=k,m.query.offset=l,h=$.apptools.api.rpc.createRPCRequest({method:c,api:a,params:m,async:!0}),$.apptools.dev.verbose("Stonerhub:Datagrid","Grid RPC request: ",h),h.fulfill({success:j(function(a){var b,c,d,g,h,i,j,k,l,m,n,o;g=[],n=a.data;for(j=0,l=n.length;j<l;j++){b=n[j],i=[b.key.value],h={},o=a.datagrid.columns;for(k=0,m=o.length;k<m;k++)d=o[k],i.push(b[d]),h[d]=b[d];g.push(i),$.stonerhub.models.ContentItem.register(b.key.value,h)}return $.apptools.dev.verbose("Stonerhub:Datagrid","Translated data map: ",g),a.datagrid.columns.splice(0,0,"key"),c={sEcho:this._getkey(e,"sEcho"),iTotalRecords:a.resultset.results_count,iTotalDisplayRecords:a.resultset.returned_count,aaData:g,sColumns:a.datagrid.columns.join(",")},console.log("Final result",c),f(c)},this),failure:j(function(a){return alert("Datagrid failure. See console."),$.apptools.dev.error("Stonerhub:Datagrid","Grid RPC error: ",a)},this)})},this)}return i(a,f),a}(),b=function(){function a(a){}return i(a,f),a}(),d=function(){function a(a){}return i(a,f),a}(),g=function(){function a(a){}return i(a,f),a}(),c=function(){function a(a){}return i(a,f),a}(),e=function(){function e(e){return this.config=e,this.datatables=new a(this),this.liveservices=new b(this),this.newsfeed=new c(this),this.social=new d(this),this.upload=new g(this),this.models={ContentItem:{objects:{},register:function(a,b){return this.objects[a]=b},get:function(a){return this.objects[a]}}},this}return e}(),window.stonerhub=new e,typeof $!="undefined"&&$!==null&&$.extend({stonerhub:window.stonerhub})}).call(this)