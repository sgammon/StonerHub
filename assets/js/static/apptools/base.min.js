(function(){var a,b,c,d,e,f,g,h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=function(){function a(){}return a}(),c=function(){function a(a){this._data={},this.platform={},this.capabilities={},this._data={browsers:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}}return i(a,b),a.prototype._makeMatch=function(a){var b,c,d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++){d=a[e],c=d.string,b=d.prop,this._data.versionSearchString=d.versionSearch||d.identity;if(c!==null){if(d.string.indexOf(d.subString)!==-1)return d.identity}else if(b)return d.identity}return g},a.prototype._makeVersion=function(a){var b;b=a.indexOf(this._data.versionSearchString);if(b!==-1)return parseFloat(a.substring(b+this._data.versionSearchString.length+1))},a.prototype.discover=function(){var a,b,c,d,e;a=this._makeMatch(this._data.browsers)||"unknown",e=this._makeVersion(navigator.userAgent)||this._makeVersion(navigator.appVersion)||"unknown",c=this._makeMatch(this._data.os)||"unknown";if(a==="iPod/iPhone"||a==="Android")d="mobile",b=!1;return this.platform={os:c,type:d,vendor:navigator.vendor,product:navigator.product,browser:a,version:e,flags:{mobile:b,webkit:$.browser.webkit,msie:$.browser.msie,opera:$.browser.opera,mozilla:$.browser.mozilla}},this.capabilities={cookies:navigator.cookieEnabled,ajax:$.support.ajax,canvas:Modernizr.canvas,geolocation:Modernizr.geolocation,svg:Modernizr.svg,workers:Modernizr.webworkers,history:Modernizr.history,sockets:Modernizr.websockets,storage:{local:Modernizr.localstorage,session:Modernizr.sessionstorage,websql:Modernizr.websqldatabase,object:Modernizr.indexeddb}}},a}(),d=function(){function a(){a.__super__.constructor.apply(this,arguments)}return i(a,b),a}(),f=function(){function a(){a.__super__.constructor.apply(this,arguments)}return i(a,b),a}(),g=function(){function a(){a.__super__.constructor.apply(this,arguments)}return i(a,b),a}(),e=function(){function a(){a.__super__.constructor.apply(this,arguments)}return i(a,b),a}(),a=function(){function a(a){return this.config=a,this.agent=new c(this),this.agent.discover(),this.events=new d(this),this.user=new g(this),this.rpc=new f(this),this.push=new e(this),this}return a}(),window.apptools=new a,typeof $!="undefined"&&$!==null&&$.extend({apptools:window.apptools})}).call(this)